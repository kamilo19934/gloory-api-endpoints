[build]
builder = "nixpacks"
# Skip secrets during build - they are only needed at runtime
buildCommand = "npm ci && npm run build"

[deploy]
startCommand = "npm run start:prod"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

# Environment variables with defaults for build phase
[build.env]
DATABASE_TYPE = "sqlite"
